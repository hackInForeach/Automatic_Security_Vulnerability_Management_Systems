# get_local_ip.py

# Python'un socket modülü, ağ iletişimi için kullanılan bir modüldür.
import socket
# Python'un logging modülü, uygulama içinde oluşan olayların (logların) kaydedilmesi için kullanılır.
# Loglama, hata ayıklama, performans takibi ve sistem izleme gibi durumlarda oldukça yararlıdır.
import logging



def get_local_ip():
    """
    Yerel IP adresini almak için bir yöntem sağlar.

    Bu fonksiyon, yerel makinenin IP adresini belirlemek için bir UDP soketi üzerinden
    Google DNS sunucusuna (8.8.8.8) port 443'ten bağlantı kurmayı dener. Bu işlem,
    herhangi bir veri gönderilmeden önce yerel ağ arabiriminin IP adresini belirlemeye yarar.

    Returns:
        str: Yerel IP adresi. Hata durumunda None döner.
    """
    try:
        # UDP üzerinden bir soket oluşturur. IPv4 adreslerini kullanacak (AF_INET) ve UDP protokolünü kullanacak (SOCK_DGRAM).
        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

        # Google DNS sunucusuna (8.8.8.8) port 443 üzerinden bağlantı kurmaya çalışır.
        # Bu bağlantı, aslında herhangi bir veri göndermez, sadece yerel IP adresini belirlemek için yapılır.
        sock.connect(("8.8.8.8", 443))

        # Bağlantı kurulduktan sonra, soketin yerel IP adresini alır.
        local_ip = sock.getsockname()[0]

        # Soketi kapatır.
        sock.close()

        # Yerel IP adresini loglar. Bu, daha sonra analiz edilmek üzere kaydedilir.
        logging.info(f"Yerel IP Adresi: {local_ip}")

        # Yerel IP adresini döner.
        return local_ip #'127.0.0.1'
    except Exception as e:
        # Hata durumunda hata mesajını loglar.
        logging.error(f"Hata: {e}")

        # Hata durumunda None döner. Bu, IP adresinin alınamadığını belirtir.
        return None

